<!doctype html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Slam Robot !</title>
    
    <style>
	canvas{
	border:dotted;
  width: 60%;
	}
  table{
    width: 60%;

  }
  #un{
    position: absolute;
    left: 0px; 
    width: 50%;
    /*border: solid red 1px;*/

  }
  #deux{
    position: absolute;
    right: 0px;
    width: 50%;
    /*border: solid red 1px;*/
  }
    </style>
    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="animation.css">-->

    <!-- Bootstrap js -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.js"></script>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="./Slam_robot.png" />

    <!--WebSocket-->
    <script src="/socket.io/socket.io.js"></script>
    
    <script>
    var socket = io.connect('http://10.251.98.169:3013');
    //Quand on reçoit un message, on l'insère dans la page
    var id = 1;
    function insereMessage(data) {
        var table = document.getElementById("dataTable");
        var row  = table.insertRow(table.rows.length);
        var cell1 = row.insertCell(0); 
        cell1.innerHTML = id;
        id++;
        var cell2 = row.insertCell(1);
        cell2.innerHTML = "( "+data.PosRobotX+" ; "+data.PosRobotY+" )"; 
        var cell3 = row.insertCell(2);
        cell3.innerHTML = "( "+data.xi+" ; "+data.yi+" )"; 
      }
    function insereLog(data) {
        var local = document.getElementById("statut");
        local.innerHTML=data;
    }
    function startCanvas() {
        var startTime = (new Date()).getTime();
        animate(myRobot, canvas, ctx, startTime);
      };

    function Start(){
        socket.on('message', function(data) {
        insereMessage(data)
        });
        insereLog('connecté'); 
        startCanvas();
    }
    
    function Stop(){
      if(socket){
             socket.disconnect(); 
           insereLog('deconnecté');
      }; 
      } 

    function Conversion(distance,angle){
      x=distance*Math.cos(angle);
      y=distance*Math.sin(angle);
      //console.log(x);
      //console.log(y);
    }

    Conversion(1,90);
    Conversion(2,60);

      
    </script>
  </head>
  <body>
    <nav>
  <!--<ul  >
      <li class="text-left" class="active"> <span><i class="icon-home"></i>Home</span></li>
      <li class="text-center">      <a href="team.html"><i class="icon-user"></i>Team</a></li>
      <li class="text-right">     <a href="project.html"><i class="icon-briefcase"></i>Project</a></li>
  </ul>-->

    </nav>
    <center>
      <div id="plan" width="400" height="300">
        <div id="circuit"></div>
        <div id="robot"></div>
        <div id="p1"></div><div id="p2"></div>
        <div id="cp1"></div><div id="cp2"></div><div id="cp3"></div><div id="cp4"></div><div id="cp5"></div><div id="cp6"></div>
      </div>
        <h1 >Slam Robot</h1>   
        <p>
          <img src="./Slam_robot.png" height="200" width="200"alt="Slam Robot" class="img-circle"></p>
          <br/>
    <article id="un">
            <input type="button"  value="Stop"  class="btn btn-danger" onclick="Stop()"  />&nbsp;&nbsp; 
            <input type="button" value="Start" class="btn btn-success" onclick="Start()" />
            <div id="statut">

            </div>
        </p>
          <br/>
      <canvas id="canvas" width="400" height="300">
	    <script src="canvas.js"        type="text/javascript"></script> 
      <script src="interpolation.js" type="text/javascript"></script>
      </canvas>
      </center>
    </article>

    <aticle id="deux">
      <center>
      <table id="dataTable" class="table table-striped">
        <tr>
          <th>Points</th>
          <th>Coordonnée du Robot (x;y)</th>
          <th>Coordonée de l'obstacle (x;y)</th>
        </tr>
      </table>
    </center>
    </article>
    </section>
    <!-- BDD-->
    <script src="../ClientBD.js"></script>
    <script src="AllBD.js" type="text/javascript"></script>
  
  </body>
</html>  
